<!DOCTYPE html>
<html>

<link rel="stylesheet" href="https://sdks.shopifycdn.com/polaris/latest/polaris.css" />

  <head>
    <title>Interstellar Flights</title>
    <%= csrf_meta_tags %>
    <%= csp_meta_tag %>

    <%= stylesheet_link_tag    'application', media: 'all', 'data-turbolinks-track': 'reload' %>
    <%= javascript_include_tag 'application', 'data-turbolinks-track': 'reload' %>

    <script type="text/javascript">
      I18n.defaultLocale = "<%= I18n.default_locale %>";
      I18n.locale = "<%= I18n.locale %>";
    </script>
  </head>

  <body>
  <header>
    <aside>
      <%= form_tag store_index_path, class: 'locale' do %>
        <%= select_tag 'set_locale',
          options_for_select(LANGUAGES, I18n.locale.to_s),
          onchange: 'this.form.submit()' %>
        <%= submit_tag 'submit', id: "submit_locale_change" %>
      <% end %>
    </aside>
  </header>
<div class="Polaris-Card">
  <ul class="Polaris-OptionList">
    <li class="Polaris-OptionList__Options">
      <p class="Polaris-OptionList__Title">Sidebar</p>

        <% if @cart %>
        <div id="cart" class="carts">
          <%= render_if_not_empty @cart && @cart.tickets.any?, @cart %>
        </div>
        <% end %>
        
      <ul class="Polaris-OptionList__Options">
        <li class="Polaris-OptionList-Option" tabindex="-1"><button type="button" class="Polaris-OptionList-Option__SingleSelectOption"><%= link_to t('.catalog'), '/store/index' %></button></li>
        <li class="Polaris-OptionList-Option" tabindex="-1"><button type="button" class="Polaris-OptionList-Option__SingleSelectOption"><%= link_to t('.contact'), '/store/index' %></button></li>
      </ul>

      <% if session[:user_id] %>
      <!-- If logged in, show admin sidebar options as well -->
      <ul class="Polaris-OptionList__Options">
        <li class="Polaris-OptionList-Option" tabindex="-1"><button type="button" class="Polaris-OptionList-Option__SingleSelectOption"><%= link_to 'Orders', orders_path %></button></li>
        <li class="Polaris-OptionList-Option" tabindex="-1"><button type="button" class="Polaris-OptionList-Option__SingleSelectOption"><%= link_to 'Users', users_path %></button></li>
        <li class="Polaris-OptionList-Option" tabindex="-1"><button type="button" class="Polaris-OptionList-Option__SingleSelectOption"><%= link_to 'Flights', flights_path %></button></li>
        <li class="Polaris-OptionList-Option" tabindex="-1"><button type="button" class="Polaris-OptionList-Option__SingleSelectOption"><%= link_to 'Log Out', logout_path, method: :delete %></button></li>
      </ul>
      <% end %>
    </li>
  </ul>
</div>
    <%= yield %>
  </body>
</html>
